---
title: 'Supabase'
description: 'Follow this tutorial to set up user authentication with Supabase'
icon: 'bolt'
---

## Set up Supabase

1. Create a [Supabase account](https://supabase.com/dashboard/sign-up) or sign in to your existing one.
2. In your Supabase dashboard, go to **"Project Settings"** then **"API Settings"**.
3. Copy your **Supabase URL** and **Supabase Anon Key**.
4. Paste these values into your `.env` file.

```env .env
EXPO_PUBLIC_SUPABASE_URL=your_supabase_url
EXPO_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

## Authentication & user data
To set up authentication and user data, run the following SQL queries in your Supabase SQL editor. Execute them one after another:

<CodeGroup>
    ```sql Creating the tables
    create  table profiles (
      id uuid references auth.users on delete cascade not  null  primary key,
      updated_at timestamp with time zone,
      username text unique,
      full_name text,
      avatar_url text,
      website text,
      constraint username_length check  (char_length(username)  >=  3)
    );

    create table todos (
      id bigint generated by default as identity primary key,
      user_id uuid references auth.users not null,
      task text check (char_length(task) > 3),
      is_complete boolean default false,
      inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
    );
    ```

    ```sql Row Level Security
    alter table profiles
      enable row level security;
    
    create policy "Public profiles are viewable by everyone." on profiles
      for  select  using  (true);
    
    create policy "Users can insert their own profile." on profiles
      for insert with  check  ((select auth.uid())  = id);
      
    create policy "Users can update own profile." on profiles
      for update using  ((select auth.uid())  = id);

    alter table todos enable row level security;

    create policy "Individuals can create todos." on todos for
      insert with check (auth.uid() = user_id);
    create policy "Individuals can read their own todos." on todos for
      select using (auth.uid() = user_id);
    create policy "Individuals can update their own todos." on todos for
      update using (auth.uid() = user_id);
    create policy "Individuals can delete their own todos." on todos for
      delete using (auth.uid() = user_id);

    create policy "Avatar images are publicly accessible." on storage.objects
      for select using (bucket_id = 'avatars');
    create policy "Anyone can upload an avatar." on storage.objects
      for insert with check (bucket_id = 'avatars');
    create policy "Anyone can update their own avatar." on storage.objects
      for update using (auth.uid() = owner) with check (bucket_id = 'avatars');
    ```

    ```sql Storage
    insert into storage.buckets (id, name)
      values ('avatars', 'avatars');
    ```
</CodeGroup> 

## URL Configuration
To enable magic link login:

- Go to **"Authentication"** then **"URL Configuration"**.
- In Site URL paste this url `http://localhost:19006` and click **"Save"**.
- Go to **"Redirect URLs"** section and click on **"Add URL"**.
- Add this URL `[app.json_scheme_variable]://**`

<Tip>
  To find out what value you need to use, head to your projects app.json file and look at `"scheme": "..."` value. For example it could be like this `com.expoship://**`.
</Tip>

<Check>
 Congrats - user authentication is now set up with Supabase and should be functional!
</Check>

## Other tutorials
<Card
  title="Set up development environment"
  icon="screwdriver-wrench"
  href="https://docs.expoship.dev/typescript/development-environment"
>
  Set up your development environment
</Card>
<CardGroup cols={2}>
  <Card
    title="Set up One Signal"
    icon="bell"
    href="https://docs.expoship.dev/typescript/onesignal"
  >
    Set up push notifications with One Signal
  </Card>
  <Card
    title="Set up Revenue Cat"
    icon="money-bill"
    href="https://docs.expoship.dev/typescript/revenuecat"
  >
    Set up in-app purchases with Revenue Cat
  </Card>
</CardGroup>